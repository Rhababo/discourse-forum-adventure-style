<script type="text/discourse-plugin" version="1.0">
    api.addPostMenuButton("next-update", (attrs) => {
        var topicOwner = "next-update by-Topic-Owner";
        if(attrs.topicOwner == false){
            return;
        }
        return{
        action: 'nextUpdatePost',
        icon: 'angle-double-right',
        className: topicOwner,
        title: 'next.update',
        position: 'first',
        disabled: !attrs.topicOwner,
      };
    });
    api.attachWidgetAction('post-menu', 'nextUpdatePost', function() {
        console.log(this);
        const attrs = this.attrs;
        const topic = this.parentWidget.parentWidget.parentWidget.parentWidget.model.topic;
        console.log(topic.postStream);
        if(topic.postStream.userFilters.length == 0){
            console.log("No user filters");
            topic.postStream.userFilters.push(attrs.user.username);
        }
        else{
            topic.postStream.userFilters = [];
        }
        console.log(attrs.user.username);
        console.log(this.parentWidget.attrs.topicUrl);
        console.log(this.parentWidget.parentWidget.parentWidget);
        console.log(this.parentWidget.parentWidget.parentWidget.parentWidget.model.topic);
        console.log("Next update button clicked");
    });
 </script>

 <script>
/*var typeTime = document.getElementById("typingDuration");
var current/*Time = typeTime.innerHTML;

var displayTypingTime = document.createElement("div","id=timerCounter", "class=timerCounter");
displayTypingTime.innerHTML = currentTime;

var displayTimeParent = document.getElementsByClassName("title-wrapper")[0];
displayTimeParent.appendChild(displayTypingTime);*/
</script>